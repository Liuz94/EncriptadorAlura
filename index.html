<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500&display=swap" rel="stylesheet">

    <title>Encriptador</title>
</head>
<body>
    

    <main>
        <h1><img class="logo" src="imagenes/Logo.svg"></h1>
        <div class="conteiner">
                <div class="ingresoTexto">

                    <textarea id="text_area" class="textonormal" name="mensaje"  placeholder="Ingrese Texto Aqui"></textarea>
                    
                            <div class="botones">

                                <p class="advertencia">⚠ Solo letras minúsculas y sin acentos</p>
                                <input onclick="encriptacion()" type="button" class="botones_encriptar" id="encriptar" value="Encriptar">
                                <input onclick="desencriptacion()" type="button" class="botones_desencriptar" id="desencriptar" value="Desencriptar">
                            
                            </div>
                </div>

        </div>
        <div class="respuesta">
            
            <ul class="nada" id="respuestaNada">

                <li><img class="nadarespuesta" src="imagenes/Muñeco.svg"></li>
                <li><p id="nadaTitulo">Ningún mensaje fue encontrado</p></li>
                <li><p  id="nadaDescripcion">Ingresa el texto que desees encriptar o desencriptar.</p></li>

            </ul>
            <div  class="resultado">

               <textarea readonly="readonly" id="final"></textarea>
                <input onclick="copiar()" type="button" class="botones_copiar" id="copiar" value="Copiar">

            </div>
        </div>

    </main>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
        var textoEscrito;
        var textoEncriptado;
        var textoDesencriptado;
        var condicion = 0;
        let parametrosencriptacion = ["ai", "enter", "imes", "ober", "ufat"];
        let letras = ["a", "e", "i", "o", "u"];
        document.getElementById("final").style.display = "none";
        document.getElementById("copiar").style.display = "none";
        function encriptacion() {
                condicion = 1;
                capturarTexto();
        }

        function desencriptacion() {
                condicion = 2;
                capturarTexto();
        }
        function escoder(){
            document.getElementById("respuestaNada").style.display = "none";
            document.getElementById("final").style.display = "inline";
            document.getElementById("text_area").value = ""; 
            document.getElementById("copiar").style.display = "inline";
        }

        function regresar(){
            document.getElementById("respuestaNada").style.display = "inline";
            document.getElementById("final").style.display = "none";
            document.getElementById("copiar").style.display = "none";
        }

        function capturarTexto(){
            textoEscrito = document.getElementById("text_area").value;
            textoEscrito = textoEscrito.toLowerCase();

            console.log(textoEscrito);
            if(condicion ==1 && textoEscrito != ""){
                textoEncriptado = textoEscrito;
                escoder();
            }
            if (condicion == 2 && textoEscrito != "") {
                textoDesencriptado = textoEscrito;
                escoder();
            }
            comparaLetras();
        } 

        function comparaLetras(){
                if(condicion == 1){
                    codificar();

                }
                if (condicion == 2) {
                    decodificar();

                }


        }

        function codificar() {
            textoEncriptado = "";
            var validacion = 0;
            for (let x = 0; x < textoEscrito.length; x++) {
               
                var letra=textoEscrito.charAt(x);

                for (let y = 0; y < letras.length; y++) {
                    if (letras[y] == letra) {
                        textoEncriptado = textoEncriptado + letra.replace(letras[y], parametrosencriptacion[y]);
                        validacion = 1;
                        break;
                    }
                    validacion = 2;
                }

                if (validacion == 2) {
                     textoEncriptado = textoEncriptado + letra;
                }


                console.log(x, textoEncriptado);

            }
            enviarMensaje(textoEncriptado);
        }  
        function decodificar(){
            for (let x = 0; x < parametrosencriptacion.length; x++) {

                textoDesencriptado = textoDesencriptado.replace(new RegExp(parametrosencriptacion[x], "g"), letras[x]);
            
            }
            
            
            console.log(textoDesencriptado);
            enviarMensaje(textoDesencriptado);
            
        }
        function enviarMensaje(mensaje){

            $("#final").html(mensaje);

        }

        function copiar(){
            var content = document.getElementById('final').innerHTML;
            navigator.clipboard.writeText(content);
            regresar();
        }
           
    </script>
</body>
</html>